# SQL запросы с группировкой и оконными функциями
## Ниже представлены примеры запросов к таблицам [customer](data\customer.csv) и [transaction](data\transaction.csv)

1. Вывести распределение (количество) клиентов по сферам деятельности, отсортировав результат по убыванию количества.

    ![№1][def]

2. Найти сумму транзакций за каждый месяц по сферам деятельности, отсортировав по месяцам и по сфере деятельности.

    ![№2][def2]

3. Вывести количество онлайн-заказов для всех брендов в рамках подтвержденных заказов клиентов из сферы IT.

    ![№3][def3]

4. Найти по всем клиентам сумму всех транзакций (list_price), максимум, минимум и количество транзакций, отсортировав результат по убыванию суммы транзакций и количества клиентов. Выполните двумя способами: используя только group by и используя только оконные функции. Сравните результат.
    
    a. GROUP BY (Делит на группы и выводит информацию по группам)

    ![№4.1][def4.1]

    b. window functions(Выводит информацию по группам, но на группы не делит)

    ![№4.2][def4.2]

5. Найти имена и фамилии клиентов с минимальной/максимальной суммой транзакций за весь период (сумма транзакций не может быть null). Напишите отдельные запросы для минимальной и максимальной суммы.

    a. С минимальной суммой транзакций

    ![№5.1][def5.1]

    b. С максимальной суммой транзакций

    ![№5.2][def5.2]

6. Вывести только самые первые транзакции клиентов. Решить с помощью оконных функций.

    ![№6][def6]

7. Вывести имена, фамилии и профессии клиентов, между транзакциями которых был максимальный интервал (интервал вычисляется в днях)

    ![№7][def7]

[def]: screenshots/№1.png
[def2]: screenshots/№2.png
[def3]: screenshots/№3.png
[def4.1]: screenshots/№4.1.png
[def4.2]: screenshots/№4.2.png
[def5.1]: screenshots/№5.1.png
[def5.2]: screenshots/№5.2.png
[def6]: screenshots/№6.png
[def7]: screenshots/№7.png